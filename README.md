

Документация Swagger после запуска будет доступна по ссылке: http://localhost:8000/swagger/index.html#/

# API для выполнения операций со списком фильмов и актеров
Данный сервис реализован на языке Go с использованием библиотеки HTTP. Для работы с PostgreSQL использовался драйвер lib/pq. Для использования сервиса неободимо авторизоваться и ввести полученный JWT токен в поле заголовка. Тип операции зависит от определенного запроса, также реализована ролевая система, благодаря которой некоторые методы недоступны для обычного пользователя.
Данные принимаются в JSON формате, далее сохраняются в базу данных PostgreSQL. Вывод данных происходит тоже в формате JSON. Реализованы все основные операции сохранения, изменения, получения и удаления.
Операции выполняются вместе со списком фильмов и актеров. При выводе списка фильмов дополнительно выводятся актеры, прикрепленные к конкретным фильмам. Для списка актеров происходит перечисление фильмов для каждого актера в списке.
Реализована спецификация на  API в формате Swagger 2.0 с подходом code-first.
В Makefile прописаны возможные варианты запуска API, тестов и миграции.
### Есть 2 способа запуска микросервиса:
1. Локально.
   Необходимо в файле конфигурации configs/config.yaml указать
   ```
   host = "localhost"
   ```
   Запустить контейнер postgres
   ```
   docker run --name=db -e POSTGRES_PASSWORD='54321' -p 5432:5432 -d postgres
   ```
   При наличии утилиты golang-migrate после первого запуска контейнеров прописать команду
   ```
   make migrate
   ```
   Она создает необходимые для работы сервиса таблицы в контейнере базы данных. Данную команду нужно прописать всего 1 раз, и далее при запуске тех же контейнеров таблицы сохранятся.

   Ввести в консоль команду
   ```
   go run cmd/main.go
   ```
   При необходимости, можно заменить названия контейнера базы данных, пароль и порты. Соответствующие параметры для такого же изменения находятся в configs/config.yaml.
3. Локально при использовании docker-compose.
   
   Необходимо в файле конфигурации configs/config.yaml указать (По умолчанию в проекте стоит такое значение)
   ```
   host = "db"
   ```
   Ввести в консоль команду
   ```
   make build && make run
   ```
   При наличии утилиты golang-migrate после первого запуска контейнеров прописать команду
   ```
   make migrate
   ```
Информация по утилите golang-migrate находится в репозитории https://github.com/golang-migrate/migrate
### Пользование сервисом
#### Авторизация
{
    "username": "admin",
    "password": "12345",
    "role": "1"
}

